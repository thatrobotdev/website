# Coo coo! (Salutations!)

<details>
  <summary>Table of Contents</summary>
  <div markdown="1">
* This will become a table of contents (this text will be scrapped).
{:toc}
  </div>
</details>

<div style="text-align: center;">
  <img alt="A pigeon, looking to the right." src="assets/images/Pigeon/Pigeon.jpg" width="300px">
</div>

{% comment %}
Updating this section? Remember to update <https://github.com/thatrobotdev/Pattern-Pigeon/blob/main/README.md> as well!
{% endcomment %}

> <span class="bird-emoji">üê¶</span> Coo coo! I'm Pattern Pigeon‚Äìyour feathered friend here to help you understand software architecture patterns like Strategy, Composite, and Observer. I might ruffle in a few pigeon facts too. What are you curious about today?
>
> <a href="https://www.flickr.com/photos/raghunath-t/15108072849/">"Pigeon"</a> by <a href="https://www.flickr.com/photos/raghunath-t/">Raghunath Thirumalaisamy</a> licensed <span class="tooltip"><a href="https://creativecommons.org/licenses/by/2.0/">üÖ≠üÖØ CC BY 2.0</a><span class="tooltip-text">Creative Commons Attribution 2.0 Generic</span></span>

<span class="bird-emoji">üê¶</span> Pattern Pigeon is a <span class="tooltip">[deterministic](https://cloud.google.com/dialogflow/cx/docs/generative-deterministic#deterministic)<span class="tooltip-text">All responses are generated by the agent, without generative input from a large language model (LLM). However, Flows use language models for understanding end-user intention, which may not be completely deterministic.</span></span> conversational assistant built with Google Cloud's [Dialogflow CX](https://dialogflow.cloud.google.com/cx) to teach the [Strategy](https://en.wikipedia.org/wiki/Strategy_pattern), [Composite](https://en.wikipedia.org/wiki/Composite_pattern), and [Observer](https://en.wikipedia.org/wiki/Observer_pattern) design patterns.

## Two ways to squack a "Hello!"

1. Why not say hello using the messaging client on the right of your screen?
2. Call [(361) 360-5763](tel:+13613605763) and you can squack wire to wire!

## Demo video

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/GiGUvNdD3oA?si=F4U26NlTYwoaplqD" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

## Learn the Strategy, Composite, and Observer Patterns

### Strategy

#### What is the Strategy pattern?

The Strategy pattern in a behavioral design pattern that defines a family of algorithms, encapsulates each one in a separate class, and makes them interchangeable. This allows the behavior of a class to be selected at runtime without modifying its code.

#### What are examples of the Strategy pattern?

##### Navigation app

A common example is a navigation app. Suppose we have a class called `Navigator`. Instead of implementing a large `buildRoute(A, B)` that handles every routing logic internally, we delegate the route calculation to separate strategy classes‚Äìlike `DrivingRouteStrategy`, `WalkingRouteStrategy`, or `CyclingRouteStrategy`. The `Navigator` simply delegates work to the current strategy, making it easy to switch behaviors without rewriting the logic.

##### Fighting video game

Another example is a fighting video game, where each character has a unique moveset. Rather than hardcoding each fighter‚Äôs behavior into one giant `Fighter` class, we can use the Strategy pattern to separate the moveset logic.

For example, we might define a `MovesetStrategy` interface with methods like `lightAttack()`, `heavyAttack()`, and `specialMove()`. Then we create different strategy classes like `KarateMoveset`, `BoxingMoveset`, or `MagicMoveset`, each implementing those methods in their own way.

The `Fighter` class holds a reference to a `MovesetStrategy`, allowing you to assign or change fighting styles dynamically‚Äîlike equipping a new skill set mid-game or supporting custom characters.

#### Why use the Strategy pattern?

The Strategy pattern encourages software maintainability and extensibility by decoupling algorithms from the classes that use them. This makes software easier to test, more flexible, and open to extension.

#### What disadvantages are there with the Strategy pattern?

While the Strategy pattern offers flexibility, there are also a few trade-offs. There are more classes to manage, increasing code complexity if not organized well. For simple behavior, it might be unnecessarily complicate the design.

### Composite

#### What is the Composite pattern?

The Composite pattern is a structural design pattern used to represent tree-like hierarchies of objects. It allows individual objects (leaves) and groups of objects (composites) to be treated uniformly through a shared interface.

In this pattern, there is a Component interface that both individual elements and composite groups implement. A Composite class contains child components‚Äîboth leaves and other composites‚Äîand delegates all world to them.

#### What are examples of the Composite pattern?

##### Image editor

Imagine an image editor that defines a `Graphic` interface. The smallest drawable element could be a `Dot`, which implements this interface. More complex shapes like `Circle` or `CompoundGraphic` (which may group multiple `Graphic` objects) also implement the same interface. This way, the editor can handle single elements and groups of elements in the same way, such as drawing, moving, or deleting them.

##### SEC

The SEC is a great real-world example of the Composite pattern. The conference as a whole can be thought of as a composite object that contains multiple components. These components can be either teams (composite) or players (leaves).

Each player represents a leaf node, an individual unit that does not contain other components. A team represents a composite node containing multiple players and can perform operations like listing player stats, or calculating team rankings. The entire conference could be a composite that contains all teams. Operations like ‚Äúprint all team rosters‚Äù or ‚Äúcompute average team performance‚Äù can be delegated down through the structure.

Because both teams and players adhere to a common interface (such as `displayStats()` or `getRanking()`), clients can treat them uniformly. Whether the component is a single player or an entire team, the operation is invoked the same way.

#### Why use the Composite pattern?

The Composite pattern is useful when you need to work with tree-like structures where individual objects and groups of objects should be treated the same way. The uniformity of the components and compositions make things simple for clients. It also makes it really easy to scale the tree structure by adding new leaves without changing existing code. It also decouples the client from differentiating between dealing with a single object or a composite, making things simpler!

#### What disadvantages are there with the Composite pattern?

While the Composite pattern is powerful, there are some disadvantages. It can be complex to design, as a component that works for both simple and composite elements can be challenging to make. It's also hard to restrict behavior because all components share the same interface.

### Observer

#### What is the Observer pattern?

The Observer Pattern is a behavioral design pattern that establishes a subscription system, where a ‚ÄúPublisher‚Äù (or ‚ÄúSubject‚Äù) can notify multiple ‚ÄúObservers‚Äù of events or changes in state.

#### What are examples of the Observer pattern?

One is the multiplayer game Pok√©mon Go. Imagine there‚Äôs a wild Pigeon‚Ä¶errr‚Ä¶a wild Pidgeot‚Ä¶, and four players are nearby trying to catch it. When one player successfully captures it, the game needs to notify the other players that the Pidgeot is no longer available. The game server (the ‚ÄúPublisher‚Äù) sends updates to all connected clients (the ‚ÄúObservers‚Äù) to reflect this change, ensuring consistency across the game world.

Another is a weather app. When an event occurs‚Äîlike a temperature change or an updated rain forecast‚Äîthe server (acting as the ‚ÄúPublisher‚Äù) sends out the new data. All subscribed client apps (the ‚ÄúObservers‚Äù) receive the update and refresh the information displayed to the user.

#### What is the difference between the Publisher/Subject and the Observer?

In this pattern, the Publisher/Subject maintains a list of all the registered subscribers, then when an event occurs that requires a notification, calls a method to each subscriber to let them know that the event occurred. Thus, the observer is the class that responds to the event.

#### Why use the Observer pattern?

There are many advantages. The subject and the observer do not require tight coupling, which makes their connection very flexible and extensible. You can add new observers very easily without modifying the subject. It is also a very efficient way to get a message out from one server to many clients in a real-time scenario.

#### What disadvantages are there with the Observer pattern?

With many observers, there could be performance implications of notifying all of them if the operation is costly or takes a long time. Also, the pattern relies on the reliability and format of the notification from the subject, so any updates to the publisher requires updates to the observers.

## Sample Conversation

Below is a sample conversation that demonstrates how the bot interacts.

<details>
  <summary>Expand conversation</summary>
  <div markdown="1">
Hi!
> üê¶ Hey there! I‚Äôm Pattern Pigeon. I‚Äôll help you learn about common software design patterns like Strategy, Composite, and Observer‚Äîstep by step. I might also chirp in with some pigeon trivia. What would you like to start with?

Can I learn about the Observer pattern?

> Coo coo! Observer it is! What would you like to learn about?

What do you know?

> About the observer pattern, why not ask for some good examples? I can answer the difference between the Publisher/Subject and the Observer, why use the Observer pattern, and any disadvantages!

First, what is the observer pattern?

> Alright, here‚Äôs the deal, coo-coo! The Observer Pattern is a behavioral design pattern that establishes a structured subscription mechanism, wherein a ‚ÄòPublisher‚Äô (or ‚ÄòSubject‚Äô) is capable of notifying multiple ‚ÄòObservers‚Äô about specific events or changes in state as they occur. Just like that, when the crumbs hit the ground, everybirdy‚Äôs in the loop, ya feel me? 

Okay, let's do something else

> Enough Observer for now, back to the coop! What to dive into next, Composite, Observer, or Strategy?

Before we continue on the next topic, could you tell me a fun fact about pigeons?

> Oooh, ooh, ooh! Here's a good one. Did you know that pigeons were "probably one of the first animals to be domesticated by humans?" According to Atlas Obscura, images and carvings of the pigeons first appear in the Middle East and North Africa around 3,000 years ago (https://www.atlasobscura.com/articles/ancient-egypt-pigeon-problem). Want to hear another?

Nah.

> Enough facts for one day, I get it. Let's fly back to the coop! What to dive into next, Composite, Observer, or Strategy?

[End]
  </div>
</details>

## For developers

### Source code

You can find the source code repository for Pattern Pigeon at [thatrobotdev/Pattern-Pigeon](https://github.com/thatrobotdev/Pattern-Pigeon).

### Contributing

{% comment %}
Updating this section? Remember to update <https://github.com/thatrobotdev/Pattern-Pigeon?tab=readme-ov-file#contributing> as well!
{% endcomment %}

Is our feathered friend not squacking right? Noticed a typo? Want to add new content? Well you're in luck! Follow these instructions to warp Pattern Pigeon into your Dialogflow CX dashboard so you can contribute changes!

Follow the instructions from [Google Cloud](https://cloud.google.com/dialogflow/cx/docs/concept/github) to set up GitHub integration:

1. If you're contributing: [fork this repository](https://github.com/thatrobotdev/Pattern-Pigeon/fork).
2. Create a [fine-grained personal access token](https://cloud.google.com/dialogflow/cx/docs/concept/github#access_token) from [GitHub](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token). (Read-only is fine if you're not contributing.)
3. [Create a secret](https://cloud.google.com/dialogflow/cx/docs/concept/github) for the token in the Dialogflow CX console.
4. [Configure Git export/restore integration](https://cloud.google.com/dialogflow/cx/docs/concept/github#dialogflow_config) for your Dialogflow CX agent.
5. Pull the agent from GitHub!
6. If contributing, push your changes and **rebase or amend any unintended edits.**  
   ‚ö†Ô∏è Note: Dialogflow CX **overwrites the entire branch** on push from the console, so make sure to:
   - Commit only intended changes.
   - Compare changes made in the dashboard vs. those you want to keep.
   - Optionally, make edits in a local text editor and manage them manually.

## License

![A pigeon standing in a flock alongside an image of a bird, a heart emoji, and the Apache software foundation feather](assets/images/Pigeon%20<3%20Apache/Pigeon%20<3%20Apache.png)

> The pigeon photo used was taken by Muhammad Mahdi Karim/<https://micro2macro.net>. The image above is licensed under the [üÑØ Free Art License](https://artlibre.org/licence/lal/en/). ([Learn more](https://github.com/thatrobotdev/Pattern-Pigeon-website/blob/main/assets/images/Pigeon%20%3C3%20Apache/LICENSE.md)). This project is not endorsed or connected to the Apache Software Foundation.

This project is licensed under the [Apache License, Version 2.0](https://www.apache.org/licenses/LICENSE-2.0.html), [which you can read here](https://github.com/thatrobotdev/Pattern-Pigeon-website/blob/main/LICENSE).

<!-- START Dialogflow Messenger Embed -->
<link rel="stylesheet" href="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/themes/df-messenger-default.css">
<script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>
<df-messenger
  project-id="pattern-pidgeon"
  agent-id="fa2eb7a0-2d7f-49aa-8232-6944236d702d"
  language-code="en"
  max-query-length="-1">
  <df-messenger-chat-bubble
    chat-title="Pattern Pigeon">
  </df-messenger-chat-bubble>
</df-messenger>
<style>
  df-messenger {
    z-index: 999;
    position: fixed;
    --df-messenger-font-color: #000;
    --df-messenger-font-family: Lato;
    --df-messenger-chat-background: #4285F4;
    --df-messenger-message-user-background: #d3e3fd;
    --df-messenger-message-bot-background: #fff;
    bottom: 16px;
    right: 16px;
  }
</style>
<!-- END Dialogflow Messenger Embed -->